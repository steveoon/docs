---
title: "GET /prompt-types"
description: "获取系统提示词类型枚举"
---

## 端点

```
GET https://huajune.duliday.com/api/v1/prompt-types
```

## 认证

```http
Authorization: Bearer YOUR_API_KEY
```

## 请求参数

此端点不需要任何参数。

## 响应格式

<ResponseField name="success" type="boolean">
  请求是否成功
</ResponseField>

<ResponseField name="data" type="object">
  响应数据对象

  <Expandable title="data 对象属性">
    <ResponseField name="types" type="array">
      系统提示词类型数组,每个类型包含以下字段:

      <Expandable title="type 对象属性">
        <ResponseField name="key" type="string">
          提示词类型标识符

          示例: `agent`, `tool`, `user`
        </ResponseField>

        <ResponseField name="priority" type="number">
          优先级(1-3)

          - `1`: 最高优先级,始终在最前面
          - `2`: 中等优先级
          - `3`: 最低优先级,可被覆盖
        </ResponseField>

        <ResponseField name="description" type="string">
          类型说明
        </ResponseField>
      </Expandable>
    </ResponseField>
  </Expandable>
</ResponseField>

## 响应示例

```json
{
  "success": true,
  "data": {
    "types": [
      {
        "key": "agent",
        "priority": 1,
        "description": "智能体级别提示词,优先级最高,不可覆盖"
      },
      {
        "key": "tool",
        "priority": 2,
        "description": "工具级别提示词,中等优先级"
      },
      {
        "key": "user",
        "priority": 3,
        "description": "用户级别提示词,优先级最低,可被覆盖"
      }
    ]
  }
}
```

## 系统提示词优先级

系统提示词按优先级从高到低合并:

```
最终提示词 = agent 提示词 + tool 提示词 + user 提示词
```

### 优先级 1: agent (智能体级别)

- **特点**: 始终在最前面,不可覆盖
- **用途**: 定义智能体的核心行为和约束
- **示例**: "你是一个专业的招聘助手,必须遵守以下原则..."

### 优先级 2: tool (工具级别)

- **特点**: 在 agent 之后,user 之前
- **用途**: 为特定工具提供上下文和指导
- **示例**: "使用 bash 工具时,请先确认命令的安全性..."

### 优先级 3: user (用户级别)

- **特点**: 优先级最低,可被其他提示词覆盖
- **用途**: 用户通过 API 传入的自定义提示词
- **示例**: 通过 `systemPrompt` 参数传入的内容

## 示例代码

<CodeGroup>

```bash cURL
curl -X GET https://huajune.duliday.com/api/v1/prompt-types \
  -H "Authorization: Bearer YOUR_API_KEY"
```

```javascript JavaScript
const response = await fetch('https://huajune.duliday.com/api/v1/prompt-types', {
  method: 'GET',
  headers: {
    'Authorization': `Bearer ${apiKey}`
  }
});

const data = await response.json();
const types = data.data.types;

console.log('系统提示词类型:');
types.forEach(type => {
  console.log(`- ${type.key} (优先级: ${type.priority}): ${type.description}`);
});
```

```python Python
import requests

url = 'https://huajune.duliday.com/api/v1/prompt-types'
headers = {
    'Authorization': f'Bearer {api_key}'
}

response = requests.get(url, headers=headers)
data = response.json()
types = data['data']['types']

print('系统提示词类型:')
for t in types:
    print(f"- {t['key']} (优先级: {t['priority']}): {t['description']}")
```

```javascript JavaScript (按优先级排序)
const response = await fetch('https://huajune.duliday.com/api/v1/prompt-types', {
  headers: { 'Authorization': `Bearer ${apiKey}` }
});

const data = await response.json();

// 按优先级排序
const sorted = data.data.types.sort((a, b) => a.priority - b.priority);

console.log('优先级顺序:');
sorted.forEach((type, index) => {
  console.log(`${index + 1}. ${type.key} (优先级 ${type.priority})`);
});
// 输出:
// 1. agent (优先级 1)
// 2. tool (优先级 2)
// 3. user (优先级 3)
```

</CodeGroup>

## 使用场景

<AccordionGroup>
  <Accordion title="理解提示词合并规则">
    了解不同来源的提示词如何组合:

    ```javascript
    async function explainPromptMerging() {
      const response = await fetch('/api/v1/prompt-types', {
        headers: { 'Authorization': `Bearer ${apiKey}` }
      });
      const data = await response.json();

      console.log('提示词合并顺序:');
      data.data.types
        .sort((a, b) => a.priority - b.priority)
        .forEach(type => {
          console.log(`${type.priority}. ${type.key}: ${type.description}`);
        });

      console.log('\n最终提示词 = agent提示词 + tool提示词 + user提示词');
    }
    ```
  </Accordion>

  <Accordion title="文档和教育">
    在开发文档中展示提示词系统:

    ```javascript
    async function generatePromptDocs() {
      const response = await fetch('/api/v1/prompt-types', {
        headers: { 'Authorization': `Bearer ${apiKey}` }
      });
      const data = await response.json();

      const docs = data.data.types.map(type => `
## ${type.key} 级别 (优先级 ${type.priority})

${type.description}

${type.priority === 3 ? '**可通过 systemPrompt 参数设置**' : '**系统自动管理,不可覆盖**'}
      `).join('\n');

      return docs;
    }
    ```
  </Accordion>

  <Accordion title="调试提示词">
    理解为什么某些提示词没有生效:

    ```javascript
    async function debugPrompt(userPrompt) {
      const response = await fetch('/api/v1/prompt-types', {
        headers: { 'Authorization': `Bearer ${apiKey}` }
      });
      const data = await response.json();

      const userType = data.data.types.find(t => t.key === 'user');

      console.log(`用户提示词优先级: ${userType.priority}`);
      console.log('注意: user 级别提示词优先级最低,可能被 agent 或 tool 级别覆盖');

      if (userPrompt.includes('必须')) {
        console.warn('⚠️ user 级别无法使用"必须"等强制性约束,请联系管理员添加到 agent 级别');
      }
    }
    ```
  </Accordion>

  <Accordion title="UI 提示">
    在用户界面中提示优先级规则:

    ```javascript
    async function getPromptGuidance() {
      const response = await fetch('/api/v1/prompt-types', {
        headers: { 'Authorization': `Bearer ${apiKey}` }
      });
      const data = await response.json();

      const userType = data.data.types.find(t => t.key === 'user');

      return {
        canOverride: userType.priority === 3,
        guidance: userType.priority === 3
          ? '您的提示词优先级较低,系统级别的约束可能会覆盖您的设置'
          : '您的提示词具有高优先级'
      };
    }

    const guidance = await getPromptGuidance();
    if (!guidance.canOverride) {
      alert(guidance.guidance);
    }
    ```
  </Accordion>
</AccordionGroup>

## 提示词合并示例

假设有以下三个来源的提示词:

```javascript
// Priority 1: agent (系统定义)
const agentPrompt = "你是一个专业的招聘助手,必须保护候选人隐私。";

// Priority 2: tool (工具定义)
const toolPrompt = "生成回复时,请使用友好、专业的语气。";

// Priority 3: user (API 请求)
const userPrompt = "你是一个幽默风趣的助手。"; // 这个会被部分覆盖

// 最终合并结果:
const finalPrompt = `
你是一个专业的招聘助手,必须保护候选人隐私。
生成回复时,请使用友好、专业的语气。
你是一个幽默风趣的助手。
`.trim();
```

<Note>
  agent 和 tool 级别的约束始终有效,user 级别的提示词在不冲突的情况下会被保留。
</Note>

## 常见错误

### 401 Unauthorized

```json
{
  "error": "Unauthorized",
  "message": "Invalid or missing API key",
  "statusCode": 401
}
```

**解决方案**: 检查 API Key 是否正确

详见 [错误码表](/api-reference/error-codes)

## 最佳实践

<CardGroup cols={2}>
  <Card title="理解优先级" icon="layer-group">
    了解不同优先级的作用,避免无效配置
  </Card>

  <Card title="文档化规则" icon="book">
    在应用文档中说明提示词合并规则
  </Card>

  <Card title="用户教育" icon="graduation-cap">
    告知用户哪些约束不可覆盖
  </Card>

  <Card title="调试工具" icon="bug">
    构建工具帮助用户理解最终提示词
  </Card>
</CardGroup>

## 相关文档

<CardGroup cols={2}>
  <Card
    title="系统提示词"
    icon="terminal"
    href="/concepts/system-prompts"
  >
    了解系统提示词的核心概念
  </Card>

  <Card
    title="Chat API"
    icon="message"
    href="/api-reference/endpoint/chat"
  >
    通过 systemPrompt 参数设置用户级提示词
  </Card>

  <Card
    title="工具系统"
    icon="wrench"
    href="/concepts/tools"
  >
    了解工具级提示词的作用
  </Card>

  <Card
    title="文本对话"
    icon="comment"
    href="/features/text-chat"
  >
    查看 systemPrompt 使用示例
  </Card>
</CardGroup>
