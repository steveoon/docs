---
title: "快速开始"
description: "5 分钟完成首次 API 调用，快速体验花卷智能体"
---

## 开始之前

在开始之前，请确保你已经：

<Check>拥有一个花卷智能体账户</Check>
<Check>获取了 API Key（可在[控制台](https://console.huajune.com)获取）</Check>

## 第一步：获取 API Key

<Steps>
  <Step title="登录控制台">
    访问 [花卷智能体控制台](https://console.huajune.com) 并登录你的账户
  </Step>
  <Step title="创建 API Key">
    在控制台中导航到"API Keys"页面，点击"创建新密钥"按钮
  </Step>
  <Step title="安全保存">复制生成的 API Key 并妥善保存，该密钥仅显示一次</Step>
</Steps>

<Warning>
  **安全提示**：请勿将 API Key
  提交到版本控制系统或公开分享。建议使用环境变量来存储密钥。
</Warning>

## 第二步：发起第一个请求

选择你熟悉的编程语言，发起第一个 API 请求：

<CodeGroup>

```bash cURL
curl -N -X POST https://huajune.duliday.com/api/v1/chat \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "anthropic/claude-3-7-sonnet-20250219",
    "messages": [
      {
        "role": "user",
        "content": "你好，请介绍一下你自己"
      }
    ],
    "stream": false
  }'
```

```javascript JavaScript
const response = await fetch("https://huajune.duliday.com/api/v1/chat", {
  method: "POST",
  headers: {
    Authorization: "Bearer YOUR_API_KEY",
    "Content-Type": "application/json",
  },
  body: JSON.stringify({
    model: "anthropic/claude-3-7-sonnet-20250219",
    messages: [
      {
        role: "user",
        content: "你好，请介绍一下你自己",
      },
    ],
    stream: false,
  }),
});

const data = await response.json();
console.log(data.data.messages[0].parts[0].text);
```

```python Python
import requests

url = "https://huajune.duliday.com/api/v1/chat"
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}
payload = {
    "model": "anthropic/claude-3-7-sonnet-20250219",
    "messages": [
        {
            "role": "user",
            "content": "你好，请介绍一下你自己"
        }
    ],
    "stream": False
}

response = requests.post(url, json=payload, headers=headers)
data = response.json()
print(data['data']['messages'][0]['parts'][0]['text'])
```

</CodeGroup>

<Note>记得将 `YOUR_API_KEY` 替换为你在第一步中获取的实际 API Key。</Note>

## 第三步：理解响应

成功的请求会返回以下格式的 JSON 响应：

```json
{
  "success": true,
  "data": {
    "messages": [
      {
        "id": "msg_abc123",
        "role": "assistant",
        "parts": [
          {
            "type": "text",
            "text": "你好！我是花卷智能体..."
          }
        ]
      }
    ],
    "usage": {
      "inputTokens": 15,
      "outputTokens": 45,
      "totalTokens": 60
    },
    "tools": {
      "used": [],
      "skipped": []
    }
  }
}
```

<AccordionGroup>
  <Accordion title="响应字段说明">
    - `messages`: 包含 AI 助手的回复消息 - `usage`: Token 使用量统计 -
    `inputTokens`: 输入的 token 数量 - `outputTokens`: 输出的 token 数量 -
    `totalTokens`: 总 token 数量 - `tools`: 工具使用情况 - `used`:
    本次使用的工具列表 - `skipped`: 跳过的工具列表
  </Accordion>
</AccordionGroup>

## 第四步：尝试流式输出

现在让我们尝试更流畅的流式输出，实现类似 ChatGPT 的打字机效果：

<CodeGroup>

```javascript JavaScript (Stream)
const response = await fetch("https://huajune.duliday.com/api/v1/chat", {
  method: "POST",
  headers: {
    Authorization: "Bearer YOUR_API_KEY",
    "Content-Type": "application/json",
  },
  body: JSON.stringify({
    model: "anthropic/claude-3-7-sonnet-20250219",
    messages: [
      {
        role: "user",
        content: "写一首关于春天的诗",
      },
    ],
    stream: true, // 启用流式输出
  }),
});

const reader = response.body.getReader();
const decoder = new TextDecoder();

while (true) {
  const { done, value } = await reader.read();
  if (done) break;

  const chunk = decoder.decode(value);
  console.log(chunk); // 实时输出每个文本片段
}
```

```python Python (Stream)
import requests

url = "https://huajune.duliday.com/api/v1/chat"
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}
payload = {
    "model": "anthropic/claude-3-7-sonnet-20250219",
    "messages": [
        {
            "role": "user",
            "content": "写一首关于春天的诗"
        }
    ],
    "stream": True  # 启用流式输出
}

with requests.post(url, json=payload, headers=headers, stream=True) as response:
    for chunk in response.iter_lines():
        if chunk:
            print(chunk.decode('utf-8'))
```

</CodeGroup>

<Tip>流式输出适合需要实时反馈的场景，如聊天界面、交互式应用等。</Tip>

## 常见问题

<AccordionGroup>
  <Accordion title="401 Unauthorized 错误">
    请检查：
    - API Key 是否正确
    - Authorization 头格式是否为 `Bearer YOUR_API_KEY`
    - API Key 是否已过期或被撤销
  </Accordion>

  <Accordion title="403 Forbidden 错误">
    可能原因：
    - 使用的模型不在你的许可列表中
    - 账户权限不足

    解决方法：使用 `GET /api/v1/models` 查看可用模型列表

  </Accordion>

  <Accordion title="如何查看可用的模型？">
    发送请求到 `GET /api/v1/models` 端点：

    ```bash
    curl -X GET https://huajune.duliday.com/api/v1/models \
      -H "Authorization: Bearer YOUR_API_KEY"
    ```

  </Accordion>
</AccordionGroup>

## 下一步

恭喜！你已经成功完成了第一次 API 调用。接下来你可以：

<CardGroup cols={2}>
  <Card
    title="探索工具调用"
    icon="wrench"
    href="/features/tool-calling"
  >
    让 AI 使用工具完成更复杂的任务
  </Card>

{" "}
<Card title="了解核心概念" icon="book" href="/concepts/models">
  深入理解模型、消息、上下文等概念
</Card>

{" "}
<Card title="查看 API 参考" icon="code" href="/api-reference/introduction">
  完整的 API 端点文档和参数说明
</Card>

  <Card
    title="最佳实践"
    icon="star"
    href="/best-practices/performance"
  >
    学习性能优化和调试技巧
  </Card>
</CardGroup>
